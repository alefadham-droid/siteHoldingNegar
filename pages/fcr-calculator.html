<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨ Ø¶Ø±ÛŒØ¨ ØªØ¨Ø¯ÛŒÙ„ - Ù…Ø±ØºØ¯Ø§Ø±ÛŒ</title>
    <link rel="stylesheet" href="../css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        .calculator-form {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
            font-size: 1.1em;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            font-family: 'Vazirmatn', sans-serif;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus {
            border-color: #667eea;
            outline: none;
        }
        
        .result-item {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
        }
        
        .result-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin: 10px 0;
        }
        
        .status-badge {
            display: inline-block;
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: 500;
            margin-top: 10px;
        }
        
        .status-excellent {
            background: #27ae60;
            color: white;
        }
        
        .status-good {
            background: #f39c12;
            color: white;
        }
        
        .status-poor {
            background: #e74c3c;
            color: white;
        }
        
        .info-box {
            background: #fff3e0;
            border-right: 5px solid #ff9800;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
        }
        
        .info-box h3 {
            color: #e65100;
            margin-bottom: 15px;
        }
        
        .info-box ul {
            list-style: none;
            padding: 0;
        }
        
        .info-box li {
            margin-bottom: 10px;
            color: #555;
            padding-right: 25px;
            position: relative;
        }
        
        .info-box li:before {
            content: "ğŸ“Œ";
            position: absolute;
            right: 0;
            color: #ff9800;
        }
        
        .date-picker {
            background: #f9f9f9;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .date-picker label {
            font-weight: 500;
            color: #555;
        }
        
        .date-picker input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: 'Vazirmatn', sans-serif;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“Š Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨ Ø¶Ø±ÛŒØ¨ ØªØ¨Ø¯ÛŒÙ„ ØºØ°Ø§ÛŒÛŒ (FCR)</h1>
            <div class="date-picker">
                <label>ğŸ“… ØªØ§Ø±ÛŒØ® Ø§Ù…Ø±ÙˆØ² (Ø´Ù…Ø³ÛŒ):</label>
                <input type="text" id="currentDate" value="1402/12/01" placeholder="1402/12/01">
            </div>
            <a href="../index.html" class="btn" style="margin-top: 20px;">ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</a>
        </header>

        <div class="calculator-container">
            <div class="data-table-section">
                <h2>ğŸ“ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¶Ø±ÛŒØ¨ ØªØ¨Ø¯ÛŒÙ„</h2>
                
                <div class="calculator-form">
                    <div class="form-group">
                        <label>ğŸ¥£ Ú©Ù„ Ø¯Ø§Ù† Ù…ØµØ±ÙÛŒ (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…):</label>
                        <input type="number" id="fcrTotalFeed" placeholder="Ù…Ø«Ø§Ù„: 8500" value="8500">
                    </div>

                    <div class="form-group">
                        <label>âš–ï¸ ÙˆØ²Ù† Ú©Ù„ Ù¾Ø±Ù†Ø¯Ú¯Ø§Ù† (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…):</label>
                        <input type="number" id="fcrTotalWeight" placeholder="Ù…Ø«Ø§Ù„: 4250" value="4250">
                    </div>

                    <div class="form-group">
                        <label>ğŸ” ØªØ¹Ø¯Ø§Ø¯ Ù¾Ø±Ù†Ø¯Ú¯Ø§Ù†:</label>
                        <input type="number" id="fcrBirdCount" placeholder="Ù…Ø«Ø§Ù„: 2000" value="2000">
                    </div>

                    <div style="text-align: center; margin: 30px 0;">
                        <button class="btn btn-success" onclick="window.calculateFCR()" style="font-size: 1.2em; padding: 15px 40px;">
                            ğŸ“Š Ù…Ø­Ø§Ø³Ø¨Ù‡ FCR
                        </button>
                    </div>
                </div>

                <div class="results-section" id="fcrResult" style="display: none;">
                    <h3>Ù†ØªØ§ÛŒØ¬ Ù…Ø­Ø§Ø³Ø¨Ø§Øª</h3>
                    <div id="fcrResultContent">
                        <!-- Ù†ØªØ§ÛŒØ¬ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
                    </div>
                </div>

                <div class="data-table-section" style="margin-top: 30px;">
                    <h3>ğŸ“‹ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ÛŒ Ø¶Ø±ÛŒØ¨ ØªØ¨Ø¯ÛŒÙ„ (FCR)</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Ø³Ù† (Ø±ÙˆØ²)</th>
                                    <th>FCR Ø¹Ø§Ù„ÛŒ</th>
                                    <th>FCR Ø®ÙˆØ¨</th>
                                    <th>FCR Ù…ØªÙˆØ³Ø·</th>
                                    <th>FCR Ø¶Ø¹ÛŒÙ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>Û²Û± Ø±ÙˆØ²</td><td>Ø²ÛŒØ± Û±.Û²</td><td>Û±.Û² - Û±.Û³</td><td>Û±.Û³ - Û±.Û´</td><td>Ø¨Ø§Ù„Ø§ÛŒ Û±.Û´</td></tr>
                                <tr><td>Û²Û¸ Ø±ÙˆØ²</td><td>Ø²ÛŒØ± Û±.Û³</td><td>Û±.Û³ - Û±.Û´</td><td>Û±.Û´ - Û±.Ûµ</td><td>Ø¨Ø§Ù„Ø§ÛŒ Û±.Ûµ</td></tr>
                                <tr><td>Û³Ûµ Ø±ÙˆØ²</td><td>Ø²ÛŒØ± Û±.Û´</td><td>Û±.Û´ - Û±.Ûµ</td><td>Û±.Ûµ - Û±.Û¶</td><td>Ø¨Ø§Ù„Ø§ÛŒ Û±.Û¶</td></tr>
                                <tr><td>Û´Û² Ø±ÙˆØ²</td><td>Ø²ÛŒØ± Û±.Ûµ</td><td>Û±.Ûµ - Û±.Û¶</td><td>Û±.Û¶ - Û±.Û·</td><td>Ø¨Ø§Ù„Ø§ÛŒ Û±.Û·</td></tr>
                                <tr><td>Û´Û¹ Ø±ÙˆØ²</td><td>Ø²ÛŒØ± Û±.Û¶</td><td>Û±.Û¶ - Û±.Û·</td><td>Û±.Û· - Û±.Û¸</td><td>Ø¨Ø§Ù„Ø§ÛŒ Û±.Û¸</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="info-box">
                    <h3>ğŸ’¡ Ù†Ú©Ø§Øª Ù…Ù‡Ù… Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø¶Ø±ÛŒØ¨ ØªØ¨Ø¯ÛŒÙ„ (FCR):</h3>
                    <ul>
                        <li>FCR Ú©Ù…ØªØ± Ù†Ø´Ø§Ù†â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ú©Ø§Ø±Ø§ÛŒÛŒ Ø¨Ø§Ù„Ø§ØªØ± Ù¾Ø±Ù†Ø¯Ù‡ Ø¯Ø± ØªØ¨Ø¯ÛŒÙ„ Ø¯Ø§Ù† Ø¨Ù‡ Ú¯ÙˆØ´Øª Ø§Ø³Øª</li>
                        <li>FCR Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„ Ø¨Ø±Ø§ÛŒ Ù…Ø±Øº Ú¯ÙˆØ´ØªÛŒ Ø¨ÛŒÙ† Û±.Ûµ ØªØ§ Û±.Û· Ø§Ø³Øª</li>
                        <li>Ø¹ÙˆØ§Ù…Ù„ Ù…ÙˆØ«Ø± Ø¨Ø± FCR: Ú©ÛŒÙÛŒØª Ø¯Ø§Ù†ØŒ Ø¯Ù…Ø§ØŒ ØªÙ‡ÙˆÛŒÙ‡ØŒ Ø³Ù„Ø§Ù…Øª Ù¾Ø±Ù†Ø¯Ù‡</li>
                        <li>Ø§ÙØ²Ø§ÛŒØ´ FCR Ø¨Ù‡ Ù…Ø¹Ù†ÛŒ Ø§ÙØ²Ø§ÛŒØ´ Ù‡Ø²ÛŒÙ†Ù‡ ØªÙˆÙ„ÛŒØ¯ Ø§Ø³Øª</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>ØªÙ…Ø§Ù…ÛŒ Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª Â© Û±Û´Û°Û´</p>
    </footer>

    <script>
        // ØªØ§Ø¨Ø¹ Ø¯Ø±ÛŒØ§ÙØª ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ Ø§Ù…Ø±ÙˆØ²
        function getTodayJalali() {
            const today = new Date();
            const j = gregorianToJalali(today.getFullYear(), today.getMonth() + 1, today.getDate());
            return `${j.jy}/${j.jm.toString().padStart(2, '0')}/${j.jd.toString().padStart(2, '0')}`;
        }

        // ØªÙˆØ§Ø¨Ø¹ ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ® (Ú©Ù¾ÛŒ Ø§Ø² daily-report)
        function gregorianToJalali(gy, gm, gd) {
            let g_days_in_month = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
            let j_days_in_month = [31, 31, 31, 31, 31, 31, 30, 30, 30, 30, 30, 29];
            
            let gy2 = (gm > 2) ? (gy + 1) : gy;
            let days = 365 * (gy + 1) + Math.floor((gy2 - 1) / 4) - Math.floor((gy2 - 1) / 100) + Math.floor((gy2 - 1) / 400);
            
            for (let i = 0; i < gm - 1; i++) {
                if (i === 1 && ((gy % 4 === 0 && gy % 100 !== 0) || gy % 400 === 0)) {
                    days += 29;
                } else {
                    days += g_days_in_month[i];
                }
            }
            days += gd;
            
            let jy = 979;
            let jm = 1;
            let jd = 1;
            
            days -= 226896;
            
            while (days >= (365 * 4 + 1) * 4) {
                days -= (365 * 4 + 1) * 4;
                jy += 4;
            }
            
            while (days >= 365) {
                if ((jy % 4 === 2 && jy % 128 !== 0) || (jy % 1320 === 3)) {
                    days -= 366;
                } else {
                    days -= 365;
                }
                jy++;
            }
            
            while (days >= j_days_in_month[jm - 1]) {
                days -= j_days_in_month[jm - 1];
                jm++;
            }
            
            jd = days + 1;
            
            return { jy, jm, jd };
        }

        window.calculateFCR = function() {
            const totalFeed = parseFloat(document.getElementById('fcrTotalFeed')?.value);
            const totalWeight = parseFloat(document.getElementById('fcrTotalWeight')?.value);
            const birdCount = parseFloat(document.getElementById('fcrBirdCount')?.value);

            if (!totalFeed || !totalWeight || !birdCount) {
                alert("Ù„Ø·ÙØ§Ù‹ Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯");
                return;
            }

            const averageWeight = (totalWeight / birdCount).toFixed(2);
            const fcr = (totalFeed / totalWeight).toFixed(2);

            let status = '';
            let statusClass = '';
            if (fcr < 1.5) {
                status = 'Ø¹Ø§Ù„ÛŒ';
                statusClass = 'status-excellent';
            } else if (fcr < 1.7) {
                status = 'Ø®ÙˆØ¨';
                statusClass = 'status-good';
            } else if (fcr < 1.9) {
                status = 'Ù…ØªÙˆØ³Ø·';
                statusClass = 'status-good';
            } else {
                status = 'Ø¶Ø¹ÛŒÙ';
                statusClass = 'status-poor';
            }

            const resultDiv = document.getElementById('fcrResult');
            const resultContent = document.getElementById('fcrResultContent');
            
            if (resultDiv && resultContent) {
                resultContent.innerHTML = `
                    <div class="result-item">
                        <h4>Ø¶Ø±ÛŒØ¨ ØªØ¨Ø¯ÛŒÙ„ ØºØ°Ø§ÛŒÛŒ (FCR)</h4>
                        <div class="result-value">${fcr}</div>
                        <div class="status-badge ${statusClass}">${status}</div>
                        <p style="margin-top: 15px; color: #555;">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† ÙˆØ²Ù† Ù‡Ø± Ù¾Ø±Ù†Ø¯Ù‡: ${averageWeight} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…</p>
                    </div>
                `;
                resultDiv.style.display = 'block';
            }
        };

        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('currentDate').value = getTodayJalali();
        });
    </script>
</body>
</html>
